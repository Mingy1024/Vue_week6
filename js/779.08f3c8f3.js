"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[779],{530:function(t,e,a){function n(t){return{all:t=t||new Map,on:function(e,a){var n=t.get(e);n?n.push(a):t.set(e,[a])},off:function(e,a){var n=t.get(e);n&&(a?n.splice(n.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var n=t.get(e);n&&n.slice().map((function(t){t(a)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return l}});const i=n();var l=i},779:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var n=a(252),i=a(577),l=a(963);const r={class:"container"},o=(0,n._)("div",{class:"text-center my-4"},[(0,n._)("h2",null,"購物車")],-1),s={class:"text-end"},u=["disabled"],c={class:"table align-middle text-center"},d=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th"),(0,n._)("th",null,"圖片"),(0,n._)("th",null,"品名"),(0,n._)("th",{style:{width:"150px"}},"數量/單位"),(0,n._)("th",null,"金額")])],-1),p={width:"50px"},h=["onClick"],g={style:{width:"200px"}},_={class:"input-group input-group-sm"},v={class:"input-group mb-3"},m=["onUpdate:modelValue","onChange"],b=["value"],C={class:"input-group-text",id:"basic-addon2"},f={class:"text-center"},y=(0,n._)("td",null,null,-1),w=(0,n._)("td",{colspan:"3",class:"text-end"},"總計",-1),x={class:"text-center"};function k(t,e,a,k,D,$){return(0,n.wg)(),(0,n.iD)("div",r,[o,(0,n._)("div",s,[(0,n._)("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=(...t)=>$.removeEntireCart&&$.removeEntireCart(...t)),disabled:!D.cartData.carts.length}," 清空購物車 ",8,u)]),(0,n._)("table",c,[d,(0,n._)("tbody",null,[D.cartData.carts?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(D.cartData.carts,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",p,[(0,n._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>$.removeCartItem(t.id)}," x ",8,h)]),(0,n._)("td",g,[(0,n._)("div",{style:(0,i.j5)([{backgroundImage:`url(${t.product.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,n._)("td",null,(0,i.zw)(t.product.title),1),(0,n._)("td",null,[(0,n._)("div",_,[(0,n._)("div",v,[(0,n.wy)((0,n._)("select",{id:"",class:"form-select","onUpdate:modelValue":e=>t.qty=e,onChange:e=>$.updateCartItem(t)},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(50,(e=>(0,n._)("option",{value:e,key:`${e}+${t.id}`},(0,i.zw)(e),9,b))),64))],40,m),[[l.bM,t.qty]]),(0,n._)("span",C,(0,i.zw)(t.product.unit),1)])])]),(0,n._)("td",f,(0,i.zw)(t.total),1)])))),128)):(0,n.kq)("",!0)]),(0,n._)("tfoot",null,[(0,n._)("tr",null,[y,w,(0,n._)("td",x,(0,i.zw)(D.cartData.final_total),1)])])])])}var D=a(530),$={data(){return{cartData:{carts:[]}}},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2//api/mingyo/cart").then((t=>{this.cartData=t.data.data}))},removeCartItem(t){this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/mingyo/cart/${t}`).then((t=>{this.getCart(),D.Z.emit("getCart"),alert("已刪除該品項")}))},removeEntireCart(){this.$http.delete("https://vue3-course-api.hexschool.io/v2//api/mingyo/carts").then((t=>{this.getCart(),D.Z.emit("getCart"),alert("已清空購物車")}))},updateCartItem(t){const e={product_id:t.id,qty:t.qty};this.$http.put(`https://vue3-course-api.hexschool.io/v2//api/mingyo/cart/${t.id}`,{data:e}).then((t=>{this.getCart()}))}},mounted(){this.getCart()}},z=a(744);const q=(0,z.Z)($,[["render",k]]);var I=q}}]);
//# sourceMappingURL=779.08f3c8f3.js.map